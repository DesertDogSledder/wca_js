<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
	<title>WOIN Character Assistant</title>
	<link href="js/jquery/jquery-ui.css" rel="stylesheet">
	<style>
        body {
            font-family: "Trebuchet MS", sans-serif;
            margin: 50px;
            background: #000000 url("js/jquery/images/ui-bg_loop_25_000000_21x21.png") 50% 50% repeat;
        }
        .demoHeaders {
            margin-top: 2em;
        }
        #dialog-link {
            padding: .4em 1em .4em 20px;
            text-decoration: none;
            position: relative;
        }
        #dialog-link span.ui-icon {
            margin: 0 5px 0 0;
            position: absolute;
            left: .2em;
            top: 50%;
            margin-top: -8px;
        }
        #icons {
            margin: 0;
            padding: 0;
        }
        #icons li {
            margin: 2px;
            position: relative;
            padding: 4px 0;
            cursor: pointer;
            float: left;
            list-style: none;
        }
        #icons span.ui-icon {
            float: left;
            margin: 0 4px;
        }
        .fakewindowcontain .ui-widget-overlay {
            position: absolute;
        }
        select {
            width: 200px;
        }
    </style>
    <!-- <script data-main="js/app.js" src="js/require.js"></script> -->
    <script src="js/jquery/jquery-3.3.1.min.js"></script>
    <script src="js/jquery/jquery-ui.js"></script>
    <script src="js/wca/lib/character.js"></script>
    <script src="js/wca/lib/helpers.js"></script>
    <script src="js/wca/data/careers/careers_martial_arts.js"></script>
    <script src="js/wca/data/races/races_new.js"></script>
    <script src="js/wca/data/races/races_now.js"></script>
    <script src="js/wca/data/races/races_old.js"></script>
    <script src="js/wca/data/homeworlds/homeworlds_new.js"></script>

</head>
<body>
    <!-- Tabs -->
    <div id="tabs">
        <ul>
            <li><a href="#tabs-overview">Overview</a></li>
            <li><a href="#tabs-race">Race</a></li>
            <li><a href="#tabs-homeworld">Homeworld</a></li>
            <li><a href="#tabs-careers">Careers</a></li>
            <li><a href="#tabs-exploits">Exploits</a></li>
            <li><a href="#tabs-equipment">Equipment</a></li>
        </ul>
        <div id="tabs-overview">
            <!-- General Info -->
            <fieldset>
                <legend>Info</legend>
                <table>
                    <tr>
                        <td>Name</td>
                        <td><input type="text" name="character_name" id="ovr_txt_character_name" title="Your character's name"/></td>
                    </tr>
                    <tr>
                        <td>Race</td>
                        <td><button id="ovr_btn_jump_to_race" class="to_race" title="Click to jump to the Race tab">unset race</button></td>
                    </tr>
                    <tr>
                        <td>Homeworld</td>
                        <td><button id="ovr_btn_jump_to_homeworld" class="to_homeworld" title="Click to jump to the Homeworld tab">unset homeworld</button></td>
                    </tr>
                    <tr>
                        <td>Trait</td>
                        <td><button id="ovr_btn_set_trait" title="Click to set the character's trait">unset trait</button></td>
                    </tr>
                    <tr>
                        <td>Hook</td>
                        <td><input type="text" name="character_hook" id="ovr_txt_character_hook" title="Your hook is a single sentence which describes a hobby or quirk about your character, such as '... who collects antiques' or '... who cannot tell a lie'."/></td>
                    </tr>
                </table>
            </fieldset>

            <!-- Skills -->
            <fieldset>
                <legend>Skills</legend>
                <ul id=ovr_lst_skills></ul>
            </fieldset>

            <!-- Exploits -->
            <fieldset>
                <legend>Exploits</legend>
                <ul id=ovr_lst_exploits></ul>
            </fieldset>

            <!-- Derived Statistics -->
            <fieldset>
                <legend>Derived Statistics</legend>
                <fieldset>
                    <legend>Health</legend>
                    Roll END (2d6) + WIL (2d6) (average = 14)
                </fieldset>
                <fieldset>
                    <legend>Initiative</legend>
                    2d6
                </fieldset>
                <fieldset>
                    <legend>Movement</legend>
                    <table>
                        <tr>
                            <td>Speed</td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td>Climb</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>Swim</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>Zero/Low/High-G</td>
                            <td>2/2/2</td>
                        </tr>
                        <tr>
                            <td>Vertical Jump (Running)</td>
                            <td>3'(6')</td>
                        </tr>
                        <tr>
                            <td>Horizontal Jump (Running)</td>
                            <td>3'(6')</td>
                        </tr>
                        <tr>
                            <td>Carry</td>
                            <td>60 (before exploits)</td>
                        </tr>
                    </table>
                </fieldset>
                <fieldset>
                    <legend>Defenses</legend>
                    <table>
                        <tr>
                            <td>Melee</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>Ranged</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>Mental</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>Vital</td>
                            <td>10</td>
                        </tr>
                    </table>
                </fieldset>
            </fieldset>
            <fieldset>
                <legend>Total Stats</legend>
                <table>
                    <tr>
                        <td>STR</td>
                        <td>AGI</td>
                        <td>END</td>
                        <td>INT</td>
                        <td>LOG</td>
                        <td>WIL</td>
                        <td>CHA</td>
                        <td>LUC</td>
                        <td>REP</td>
                        <td>MAG</td>
                        <td>CHI</td>
                        <td>PSI</td>
                    </tr>
                    <tr>
                        <td id="total_str">3 (2d6)</td>
                        <td id="total_agi">3 (2d6)</td>
                        <td id="total_end">3 (2d6)</td>
                        <td id="total_int">3 (2d6)</td>
                        <td id="total_log">3 (2d6)</td>
                        <td id="total_wil">3 (2d6)</td>
                        <td id="total_cha">3 (2d6)</td>
                        <td id="total_luc">3 (2d6)</td>
                        <td id="total_rep">3 (2d6)</td>
                        <td id="total_mag">3 (2d6)</td>
                        <td id="total_chi">3 (2d6)</td>
                        <td id="total_psi">3 (2d6)</td>
                    </tr>
                </table>
            </fieldset>

        </div>
        <div id="tabs-race">
            <fieldset>
                <legend>Race</legend>
                <table>
                    <tr>
                        <td>Race Name</td>
                        <td><button id="rce_btn_set_race" title="Human Fall Flat >|)">Human</button></td>
                    </tr>
                    <tr>
                        <td>Size</td>
                        <td>
                            <select name="rce_sm_size" id="rce_sm_size">
                                <option>Tiny</option>
                                <option>Small</option>
                                <option selected="selected">Medium</option>
                                <option>Large</option>
                                <option>Enormous</option>
                                <option>Gigantic</option>
                                <option>Colossal</option>
                                <option>Titanic</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </fieldset>
            <fieldset>
                <legend>Selected Skills</legend>
                <ul>
                    <li>Running (1)</li>
                    <li>Sneezing (1)</li>
                </ul>
                <button id="rce_btn_set_race_skills" title="Select the racial skills">Set Race Skills</button>
            </fieldset>
            <fieldset>
                <legend>Exploits</legend>
                <ul>
                    <li title="Humans may not be the fastest or the strongest, but they are known for their resilience. Humans get +1 to their 1d6 die roll to shake off a temporary condition.">Enduring</li>
                    <li title="Driven by an inquisitive, exploratory nature, Humans recharge their LUC pool every time they stand on a planet new to them.">Explorers</li>
                    <li title="Humans boast more variation within their species than most. Add 2 to any attribute, and add a further +1 to one other attribute (noted above).">Varied</li>
                </ul>
            </fieldset>
            <fieldset>
                <legend>Racial Stats</legend>
                <table>
                    <tr>
                        <td>STR</td>
                        <td>AGI</td>
                        <td>END</td>
                        <td>INT</td>
                        <td>LOG</td>
                        <td>WIL</td>
                        <td>CHA</td>
                        <td>LUC</td>
                        <td>REP</td>
                        <td>MAG</td>
                        <td>CHI</td>
                        <td>PSI</td>
                    </tr>
                    <tr>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                    </tr>
                </table>
            </fieldset>
        </div>
        <div id="tabs-homeworld">
            <fieldset>
                <legend>Homeworld</legend>
                <button id="hmw_btn_set_homeworld" title="Select the character's homeworld (if any)">None</button>
            </fieldset>
            <fieldset>
                    <legend>Selected Skills</legend>
                    <ul>
                        <li>Coughing (1)</li>
                        <li>Sniffling (1)</li>
                    </ul>
                    <button id="hmw_btn_set_homeworld_skills" title="Select the character's homeworld skills">Set Homeworld Skills</button>
            </fieldset>
            <fieldset>
                <legend>Homeworld Stats</legend>
                <table>
                    <tr>
                        <td>STR</td>
                        <td>AGI</td>
                        <td>END</td>
                        <td>INT</td>
                        <td>LOG</td>
                        <td>WIL</td>
                        <td>CHA</td>
                        <td>LUC</td>
                        <td>REP</td>
                        <td>MAG</td>
                        <td>CHI</td>
                        <td>PSI</td>
                    </tr>
                    <tr>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                        <td>+0</td>
                    </tr>
                </table>
            </fieldset>
        </div>
        <div id="tabs-careers">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                <div id="accordion">
                    <div class="group">
                        <h3>Prodigy (Origin)</h3>
                        <div>
                            <fieldset>
                                <legend>Selected Skills</legend>
                                <ul>
                                    <li>computers (1)</li>
                                    <li>psychology (1)</li>
                                </ul>
                                <button id="button_set_race_skills" title="Select the racial skills">Set "Prodigy" Skills</button>
                            </fieldset>
                            <fieldset>
                                <legend>Exploits</legend>
                                <ul>
                                    <li title="You often have an unorthodox approach to things. Once per day you may substitute one of your mental attributes for another one for the purposes of making a single attribute check.">Unorthodox</li>
                                </ul>
                                <button id="button_set_career_skills_1" title="Set Prodigy exploit">Set "Prodigy" Exploit</button>
                            </fieldset>
                            <fieldset>
                                <legend>Career Stats</legend>
                                <table>
                                    <tr>
                                        <td>STR</td>
                                        <td>AGI</td>
                                        <td>END</td>
                                        <td>INT</td>
                                        <td>LOG</td>
                                        <td>WIL</td>
                                        <td>CHA</td>
                                        <td>LUC</td>
                                        <td>REP</td>
                                        <td>MAG</td>
                                        <td>CHI</td>
                                        <td>PSI</td>
                                    </tr>
                                    <tr>
                                        <td>+0</td>
                                        <td>+0</td>
                                        <td>+0</td>
                                        <td>+1</td>
                                        <td>+1</td>
                                        <td>+0</td>
                                        <td>+0</td>
                                        <td>+1</td>
                                        <td>+1</td>
                                        <td>+0</td>
                                        <td>+0</td>
                                        <td>+0</td>
                                    </tr>
                                </table>
                            </fieldset>
                        </div>
                    </div>
                    <div class="group">
                        <h3>College (2)</h3>
                        <div>Phasellus mattis tincidunt nibh.</div>
                    </div>
                    <div class="group">
                        <h3>Third Career</h3>
                        <div>Nam dui erat, auctor a, dignissim quis.</div>
                    </div>
                </div>
        </div>
        <div id="tabs-exploits">
            
        </div>
        <div id="tabs-equipment">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>

        <div id="dialog_race_select" title="Select a Race">
            <select id="rce_sm_race_module" name="rce_sm_race_module">
                <option value="races_old">OLD</option>
                <option value="races_now">NOW</option>
                <option value="races_new">NEW</option>
            </select>
            <br />
            <select id="rce_sm_race_select">
                <option>Blah</option>
            </select>
        </div>
    </div>

    <script src="js/ui.js"></script>
    <script>
        ////////
        // UI //
        ////////
        var woin_character = new Character();
        woin_character.race.skills = {'running': 3}
        woin_character.race.skills['pistols'] = 1;
        woin_character.homeworld.skills = {'jumping': 1};
        // woin_character.race = deep_copy(race_new_human)
        // woin_character.homeworld = deep_copy(homeworld_arctic)

        function update_info() {
            // Overview
            $("#ovr_txt_character_name").val(woin_character.name);
            total_stats = calc_stat_total(woin_character);
            skill_total = calc_skill_total(woin_character);
            exploit_total = calc_exploit_total(woin_character);
            console.log(exploit_total);
            $("#ovr_lst_skills").empty();
            $("#ovr_lst_exploits").empty();

            for (skill in skill_total)
            {
                $("#ovr_lst_skills").append('<li>' + skill + ' (' + skill_total[skill] + ')</li>');
            }

            for (exploit in exploit_total)
            {
                $("#ovr_lst_exploits").append('<li title="' + exploit_total[exploit] + '">' + exploit + '</li>')
            }

            max_dice_pool = calc_max_dice_pool_size(woin_character.career_track.length);
            str_dice_pool_size = calc_dice_pool_size(total_stats['str']);
            agi_dice_pool_size = calc_dice_pool_size(total_stats['agi']);
            end_dice_pool_size = calc_dice_pool_size(total_stats['end']);
            int_dice_pool_size = calc_dice_pool_size(total_stats['int']);
            log_dice_pool_size = calc_dice_pool_size(total_stats['log']);
            wil_dice_pool_size = calc_dice_pool_size(total_stats['wil']);
            cha_dice_pool_size = calc_dice_pool_size(total_stats['cha']);
            luc_dice_pool_size = calc_dice_pool_size(total_stats['luc']);
            rep_dice_pool_size = calc_dice_pool_size(total_stats['rep']);
            mag_dice_pool_size = calc_dice_pool_size(total_stats['mag']);
            chi_dice_pool_size = calc_dice_pool_size(total_stats['chi']);
            psi_dice_pool_size = calc_dice_pool_size(total_stats['psi']);

            str_dice_pool = (str_dice_pool_size <= max_dice_pool) ? str_dice_pool_size : max_dice_pool;
            agi_dice_pool = (agi_dice_pool_size <= max_dice_pool) ? agi_dice_pool_size : max_dice_pool;
            end_dice_pool = (end_dice_pool_size <= max_dice_pool) ? end_dice_pool_size : max_dice_pool;
            int_dice_pool = (int_dice_pool_size <= max_dice_pool) ? int_dice_pool_size : max_dice_pool;
            log_dice_pool = (log_dice_pool_size <= max_dice_pool) ? log_dice_pool_size : max_dice_pool;
            wil_dice_pool = (wil_dice_pool_size <= max_dice_pool) ? wil_dice_pool_size : max_dice_pool;
            cha_dice_pool = (cha_dice_pool_size <= max_dice_pool) ? cha_dice_pool_size : max_dice_pool;
            luc_dice_pool = (luc_dice_pool_size <= max_dice_pool) ? luc_dice_pool_size : max_dice_pool;
            rep_dice_pool = (rep_dice_pool_size <= max_dice_pool) ? rep_dice_pool_size : max_dice_pool;
            mag_dice_pool = (mag_dice_pool_size <= max_dice_pool) ? mag_dice_pool_size : max_dice_pool;
            chi_dice_pool = (chi_dice_pool_size <= max_dice_pool) ? chi_dice_pool_size : max_dice_pool;
            psi_dice_pool = (psi_dice_pool_size <= max_dice_pool) ? psi_dice_pool_size : max_dice_pool;

            $("#total_str").html(total_stats['str'] + '(' + str_dice_pool + 'd6)');
            $("#total_agi").html(total_stats['agi'] + '(' + agi_dice_pool + 'd6)');
            $("#total_end").html(total_stats['end'] + '(' + end_dice_pool + 'd6)');
            $("#total_int").html(total_stats['int'] + '(' + int_dice_pool + 'd6)');
            $("#total_log").html(total_stats['log'] + '(' + log_dice_pool + 'd6)');
            $("#total_wil").html(total_stats['wil'] + '(' + wil_dice_pool + 'd6)');
            $("#total_cha").html(total_stats['cha'] + '(' + cha_dice_pool + 'd6)');
            $("#total_luc").html(total_stats['luc'] + '(' + luc_dice_pool + 'd6)');
            $("#total_rep").html(total_stats['rep'] + '(' + rep_dice_pool + 'd6)');
            $("#total_mag").html(total_stats['mag'] + '(' + mag_dice_pool + 'd6)');
            $("#total_chi").html(total_stats['chi'] + '(' + chi_dice_pool + 'd6)');
            $("#total_psi").html(total_stats['psi'] + '(' + psi_dice_pool + 'd6)');

            $("#ovr_btn_jump_to_race").button('option', 'label', woin_character.race.name);
            $("#ovr_btn_jump_to_homeworld").button('option', 'label', woin_character.homeworld.name);
            $("#ovr_btn_set_trait").button('option', 'label', woin_character.trait.name);
            $("#ovr_txt_character_hook").val(woin_character.hook);

            // Race tab
            $("#rce_btn_set_race").button('option', 'label', woin_character.race.name);

            // Homeworld tab
            $("#hmw_btn_set_homeworld").button('option', 'label', woin_character.homeworld.name);

            // Career tab
        };

        update_info();

        // dialog = $("#dialog_race_select").dialog({
        //     autoOpen: false,
        //     height: 400,
        //     width: 350,
        //     modal: false,
        //     buttons: {
        //         Cancel: function() {
        //             dialog.dialog("close");
        //         }
        //     },
        //     close: function() {

        //     }
        // });

        // race_modules = {
        //     "races_new": race_new_list,
        //     "races_now": race_now_list,
        //     "races_old": race_old_list
        // };

        $("#rce_sm_race_module").selectmenu({
            change: select_race_module
        });
        $("#rce_sm_race_select").selectmenu();
    </script>
</body>

