var temp_exploits = [];

// Event bindings
$("#exp_btn_edit_exploits").on("click", edit_exploits_modal);
$("#exp_edit_exploits_modal_source").on("change", edit_exploits_modal_source);
$("#exp_edit_exploits_modal_exploit").on("change", edit_exploits_modal_exploit);
$("#exp_edit_exploits_modal_add").on("click", edit_exploits_modal_add);

function edit_exploits_modal() {
    temp_exploits = [];
    $("#exp_edit_exploits_modal").modal();
    $("#exp_edit_exploits_modal_source").val('android');
    edit_exploits_modal_source();
    edit_exploits_modal_refresh();
    enable_tooltips();
}

function edit_exploits_modal_source() {
    let exploit_source = $("#exp_edit_exploits_modal_source").val();
    $("#exp_edit_exploits_modal_exploit").empty();
    for (exploit in exploit_dict[exploit_source]) {
        $("#exp_edit_exploits_modal_exploit").append($('<option>', {
            value: exploit,
            text: exploit_dict[exploit_source][exploit]['Name']
        }))
    }
    edit_exploits_modal_exploit();
}

function edit_exploits_modal_exploit() {
    let exploit_source = $("#exp_edit_exploits_modal_source").val();
    let selected_exploit = $("#exp_edit_exploits_modal_exploit").val();
    console.log(selected_exploit);
    $("#exp_edit_exploits_modal_exploit_desc").html(exploit_dict[exploit_source][selected_exploit]['Desc'])
}

function edit_exploits_modal_add() {
    let exploit_source = $("#exp_edit_exploits_modal_source").val();
    let selected_exploit = $("#exp_edit_exploits_modal_exploit").val();
    temp_exploits.push(exploit_dict[exploit_source][selected_exploit]);
    edit_exploits_modal_refresh();
}

function edit_exploits_modal_refresh() {
    $("#exp_edit_exploits_modal_exploits_list").empty();
    for (exploit in temp_exploits) {
        $("#exp_edit_exploits_modal_exploits_list").append($('<option>', {
            value: temp_exploits[exploit]['Name'],
            text: temp_exploits[exploit]['Name']
        }));
    }
}